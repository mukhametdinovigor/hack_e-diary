# Программа для взлома электронного дневника школы 


[Здесь](https://github.com/devmanorg/e-diary/) находится репозиторий сайта. Это интерфейс для учеников школы.  Можно посмотреть
оценки, расписание и прочую открытую информацию. Учителя заполняют базу данных через другой сайт. Ставят там оценки и т.д.

Этот скрипт взламывает базу данных сайта. Исправляет плохие оценки, убирает замечания и добавляет похвалу от учителей.

## Установка

Скрипт необходимо загрузить на сервер и положить рядом с файлом `manage.py`

## Описание работы скрипта

Для запуска скрипта необходимо запустить Django shell, для этого в командной строке набрать:
 
 `manage.py shell`

затем нужно импортировать скрипт для взлома базы данных:

 `import script`

потом запустить сам скрипт:

 `script.main()`.

В результате работы скрипта все оценки меньше четверки будут исправлены на пятерки, удалятся все замечания, добавится похвала
от учителя по случайному предмету.
По умолчанию исправляются данные Фролова Ивана, класс 6А.
Для того чтобы исправить данные другого человека необходимо выполнить следующую команду:

`scripts.main('Андреева Лидия', 10, 'В')`

То есть в функцию `main` необходимо передать фамилию и имя ученика, а также номер и букву его класса. В этом случае, похвала
также добавляется по случайному предмету. Чтобы добавить похвалу по конкретному предмету, его надо указать явно:

`scripts.main('Андреева Лидия', 10, 'В', 'Химия')`


## Возможные ошибки

Если будет опечатка в названии урока или такого урока нет у текущего ученика, выведется сообщение:

 `Не существует такого урока - subject` где `subject` - это название предмета.

Если будет опечатка в фамилии или имени ученика, или это будет несуществующий ученик, выведется сообщение:

 `Ученика с таким именем не существует`

Также возможна ситуация, когда в скрипт передают только одно имя, или фамилию и в базе находится несколько человек, выводится
сообщение:

`Есть несколько учеников с таким именем`

в данной ситуации  рекомендуется указать полные данные ФИО.


## Описание моделей базы данных сайта

На сайте есть ученики: `Schoolkid`. Класс ученика определяется через комбинацию его полей `year_of_study` — год обучения и `group_letter` — литера класса. Вместе получается, например, 10А. Ученик связан со следующими моделями:

- `Mark` — оценка на уроке, от 2 до 5.
- `Commendation` — похвала от учителя, за особые достижения.
- `Chastisement` — замечание от учителя, за особые проступки.

Все 3 объекта связаны не только с учителем, который их создал, но и с учебным предметом (`Subject`). Примеры `Subject`:

- Математика 8 класса
- Геометрия 11 класса
- Русский язык 1 класса
- Русский язык 4 класса

`Subject` определяется не только названием, но и годом обучения, для которого учебный предмет проходит.

За расписание уроков отвечает модель `Lesson`. Каждый объект `Lesson` — урок в расписании. У урока есть комбинация `year_of_study` и `group_letter`, благодаря ей можно узнать для какого класса проходит этот урок. У урока есть `subject` и `teacher`, которые отвечают на вопросы "что за урок" и "кто ведёт". У урока есть `room` — номер кабинета, где он проходит. Урок проходит в дату `date`.

Расписание в школе строится по слотам:

- 8:00-8:40 — 1 урок
- 8:50-9:30 — 2 урок
- ...

У каждого `Lesson` есть поле `timeslot`, которое объясняет, какой номер у этого урока в расписании.

## Запуск

- Скачайте код
- Установите зависимости командой `pip install -r requirements.txt`
- Создайте БД командой `python3 manage.py migrate`
- Запустите сервер командой `python3 manage.py runserver`

## Переменные окружения

Часть настроек проекта берётся из переменных окружения. Чтобы их определить, создайте файл `.env` рядом с `manage.py` и запишите туда данные в таком формате: `ПЕРЕМЕННАЯ=значение`.

Доступны 3 переменные:
- `DEBUG` — дебаг-режим. Поставьте True, чтобы увидеть отладочную информацию в случае ошибки.
- `SECRET_KEY` — секретный ключ проекта
- `ALLOWED_HOSTS` — см [документацию Django](https://docs.djangoproject.com/en/3.1/ref/settings/#allowed-hosts).
- `DATABASE_NAME` — путь до базы данных, например: `schoolbase.sqlite3`

## Цели проекта

Код написан в учебных целях — это урок в курсе по Python и веб-разработке на сайте [Devman](https://dvmn.org).
